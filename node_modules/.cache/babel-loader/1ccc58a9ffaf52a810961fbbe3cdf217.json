{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from \"@/firebase/firebase\";\nexport default {\n  data: () => ({\n    dialog: false,\n    name: \"\",\n    file: null\n  }),\n  methods: {\n    async onSubmit() {\n      let thumbnailUrl = \"\";\n\n      if (this.file) {\n        const filePath = `/room/${this.file.name}`;\n        await firebase.storage().ref().child(filePath).put(this.file).then(async snapshot => {\n          thumbnailUrl = await snapshot.ref.getDownloadURL();\n          console.log(\"thumbnailUrl\", thumbnailUrl);\n        });\n      }\n\n      const roomRef = firebase.firestore().collection(\"rooms\");\n      await roomRef.add({\n        name: this.name,\n        thumbnailUrl: thumbnailUrl,\n        createdAt: firebase.firestore.Timestamp.now()\n      }).then(result => {\n        console.log(\"success to create room\", result);\n        this.$router.go({\n          path: \"/\",\n          force: true\n        });\n        this.dialog = false;\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AAEA;AACAA;AACAC,iBADA;AAEAC,YAFA;AAGAC;AAHA,IADA;AAMAC;AACA;AACA;;AACA;AACA;AACA,uBACAC,OADA,GAEAC,GAFA,GAGAC,KAHA,CAGAC,QAHA,EAIAC,GAJA,CAIA,SAJA,EAKAC,IALA,CAKA;AACAC;AACAC;AACA,SARA;AASA;;AAEA;AACA,oBACAC,GADA,CACA;AACAX,uBADA;AAEAS,kCAFA;AAGAG;AAHA,OADA,EAMAJ,IANA,CAMAK;AACAH;AACA;AAAAI;AAAAC;AAAA;AACA;AACA,OAVA;AAWA;;AA5BA;AANA","names":["data","dialog","name","file","methods","storage","ref","child","filePath","put","then","thumbnailUrl","console","add","createdAt","result","path","force"],"sourceRoot":"src/components/modal","sources":["CreateRoom.vue"],"sourcesContent":["<template>\n <!-- <v-row justify=\"center\"> -->\n <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n  <template v-slot:activator=\"{ on, attrs }\">\n   <v-avatar color=\"primary\" size=\"128\" dark v-bind=\"attrs\" v-on=\"on\">\n    <!-- <v-btn color=\"primary\"> -->\n    <v-icon x-large color=\"white\"> mdi-home-plus </v-icon>\n    <!-- </v-btn> -->\n   </v-avatar>\n  </template>\n  <v-card>\n   <v-card-title>\n    <span class=\"text-h5\">新しいルーム</span>\n   </v-card-title>\n   <v-card-text>\n    <v-container>\n     <v-row>\n      <v-col cols=\"12\">\n       <v-text-field\n        v-model=\"name\"\n        label=\"ルーム名を入力してください\"\n        required\n       ></v-text-field>\n      </v-col>\n      <v-col cols=\"12\">\n       <v-file-input\n        v-model=\"file\"\n        label=\"ルームアイコンを選択してください\"\n        truncate-length=\"15\"\n        accept=\"image/*\"\n       ></v-file-input>\n      </v-col>\n     </v-row>\n    </v-container>\n   </v-card-text>\n   <v-card-actions>\n    <v-spacer></v-spacer>\n    <v-btn color=\"success darken-1\" @click=\"onSubmit\">\n     <v-icon left> mdi-check-bold </v-icon>作成\n    </v-btn>\n    <v-btn color=\"blue darken-1\" text @click=\"dialog = false\"> 閉じる </v-btn>\n   </v-card-actions>\n  </v-card>\n </v-dialog>\n <!-- </v-row> -->\n</template>\n\n<script>\nimport firebase from \"@/firebase/firebase\";\n\nexport default {\n data: () => ({\n  dialog: false,\n  name: \"\",\n  file: null,\n }),\n methods: {\n  async onSubmit() {\n   let thumbnailUrl = \"\";\n   if (this.file) {\n    const filePath = `/room/${this.file.name}`;\n    await firebase\n     .storage()\n     .ref()\n     .child(filePath)\n     .put(this.file)\n     .then(async (snapshot) => {\n      thumbnailUrl = await snapshot.ref.getDownloadURL();\n      console.log(\"thumbnailUrl\", thumbnailUrl);\n     });\n   }\n\n   const roomRef = firebase.firestore().collection(\"rooms\");\n   await roomRef\n    .add({\n     name: this.name,\n     thumbnailUrl: thumbnailUrl,\n     createdAt: firebase.firestore.Timestamp.now(),\n    })\n    .then((result) => {\n     console.log(\"success to create room\", result);\n     this.$router.go({ path: \"/\", force: true });\n     this.dialog = false;\n    });\n  },\n },\n};\n</script>\n\n<style>\n.newroom-icon {\n display: block !important;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}