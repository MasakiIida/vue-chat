{"ast":null,"code":"import _asyncToGenerator from \"/Users/masakiiida/Documents/Project/Portfolio/vue-chat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport firebase from \"@/firebase/firebase\";\nexport default {\n  data: function data() {\n    return {\n      dialog: false,\n      name: \"\",\n      file: null\n    };\n  },\n  methids: {\n    onsubmit: function onsubmit() {\n      var thumbnailUrl = \"\";\n\n      if (this.file) {\n        var filePath = \"/room/\".concat(this.file.name);\n        firebase.storage().ref().child(filePath).put(this.file).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(snapshot) {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return snapshot.ref.getDownloadURL();\n\n                  case 2:\n                    thumbnailUrl = _context.sent;\n                    console.log(\"thumbnailUrl\", thumbnailUrl);\n\n                  case 4:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }\n\n      var roomRef = firebase.firestore().collection(\"rooms\");\n      roomRef.add({\n        name: this.name,\n        thumbnailUrl: thumbnailUrl,\n        createdAt: firebase.firestore.Timestamp.now()\n      });\n      then(function (result) {\n        console.log(\"success to create room\", result);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AAEA;AACAA;AAAA;AACAC,mBADA;AAEAC,cAFA;AAGAC;AAHA;AAAA,GADA;AAMAC;AACAC,YADA,sBACA;AACA;;AACA;AACA;AACAC,iBACAC,OADA,GAEAC,GAFA,GAGAC,KAHA,CAGAC,QAHA,EAIAC,GAJA,CAIA,SAJA,EAKAC,IALA;AAAA,6EAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACAC,6BADA;;AAAA;AACAC,gCADA;AAEAC;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WALA;;AAAA;AAAA;AAAA;AAAA;AASA;;AAEA;AACAC;AACAd,uBADA;AAEAY,kCAFA;AAGAG;AAHA;AAKAL;AACAG;AACA,OAFA;AAGA;AAzBA;AANA","names":["data","dialog","name","file","methids","onsubmit","firebase","storage","ref","child","filePath","put","then","snapshot","thumbnailUrl","console","roomRef","createdAt"],"sourceRoot":"src/components/modal","sources":["CreateRoom.vue"],"sourcesContent":["<template>\n <v-row justify=\"center\">\n  <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n   <template v-slot:activator=\"{ on, attrs }\">\n    <v-btn color=\"primary\" dark v-bind=\"attrs\" v-on=\"on\">Create Room</v-btn>\n   </template>\n   <v-card>\n    <v-card-title>\n     <span class=\"text-h5\">New Room</span>\n    </v-card-title>\n    <v-card-text>\n     <v-container>\n      <v-row>\n       <v-col cols=\"12\">\n        <v-text-field v-model=\"name\" label=\"Room Name*\" required></v-text-field>\n       </v-col>\n       <v-col cols=\"12\">\n        <v-file-input\n         v-model=\"file\"\n         label=\"Select a Room Icon\"\n         truncate-length=\"15\"\n         accept=\"image/*\"\n        ></v-file-input>\n       </v-col>\n      </v-row>\n     </v-container>\n     <small>*indicates required field</small>\n    </v-card-text>\n    <v-card-actions>\n     <v-spacer></v-spacer>\n     <v-btn color=\"blue darken-1\" text @click=\"dialog = false\"> Close </v-btn>\n     <v-btn color=\"blue darken-1\" text @click=\"onSubmit\"> Save </v-btn>\n    </v-card-actions>\n   </v-card>\n  </v-dialog>\n </v-row>\n</template>\n\n<script>\nimport firebase from \"@/firebase/firebase\";\n\nexport default {\n data: () => ({\n  dialog: false,\n  name: \"\",\n  file: null,\n }),\n methids: {\n  onsubmit() {\n   let thumbnailUrl = \"\";\n   if (this.file) {\n    const filePath = `/room/${this.file.name}`;\n    firebase\n     .storage()\n     .ref()\n     .child(filePath)\n     .put(this.file)\n     .then(async (snapshot) => {\n      thumbnailUrl = await snapshot.ref.getDownloadURL();\n      console.log(\"thumbnailUrl\", thumbnailUrl);\n     });\n   }\n\n   const roomRef = firebase.firestore().collection(\"rooms\");\n   roomRef.add({\n    name: this.name,\n    thumbnailUrl: thumbnailUrl,\n    createdAt: firebase.firestore.Timestamp.now(),\n   });\n   then((result) => {\n    console.log(\"success to create room\", result);\n   });\n  },\n },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}