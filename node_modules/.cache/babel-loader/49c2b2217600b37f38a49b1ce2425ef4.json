{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\"; // import HomeView from \"../views/HomeView.vue\";\n\nimport UserList from \"../views/UserList.vue\";\nimport ChatBoard from \"../views/ChatBoard.vue\";\nimport LoginView from \"../views/LoginView.vue\";\nimport SignUp from \"../views/SignUp.vue\";\nimport firebase from \"@/firebase/firebase\";\nVue.use(VueRouter);\nvar routes = [{\n  path: \"/\",\n  name: \"UserList\",\n  component: UserList,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/about\",\n  name: \"about\",\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: function component() {\n    return import(\n    /* webpackChunkName: \"about\" */\n    \"../views/AboutView.vue\");\n  }\n}, {\n  path: \"/chat\",\n  name: \"ChatBoard\",\n  component: ChatBoard\n}, {\n  path: \"/login\",\n  name: \"LoginView\",\n  component: LoginView\n}, {\n  path: \"/signup\",\n  name: \"SignUp\",\n  component: SignUp\n}];\nvar router = new VueRouter({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var requiresAuth = to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  });\n\n  if (requiresAuth) {\n    var user = sessionStorage.getItem(\"user\");\n    console.log(JSON.parse(user));\n\n    if (!user) {\n      next({\n        path: \"/login\",\n        query: {\n          redirect: to.fullPath\n        }\n      });\n    } else {\n      next();\n    }\n\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (!user) {\n        next({\n          path: \"/login\",\n          query: {\n            redirect: to.fullPath\n          }\n        });\n      } else {\n        next();\n      }\n    });\n  }\n});\nexport default router;","map":{"version":3,"sources":["/Users/masakiiida/Documents/Project/Portfolio/vue-chat/src/router/index.js"],"names":["Vue","VueRouter","UserList","ChatBoard","LoginView","SignUp","firebase","use","routes","path","name","component","meta","requiresAuth","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","user","sessionStorage","getItem","console","log","JSON","parse","query","redirect","fullPath","auth","onAuthStateChanged"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACA;;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AAEAN,GAAG,CAACO,GAAJ,CAAQN,SAAR;AAEA,IAAMO,MAAM,GAAG,CACd;AACCC,EAAAA,IAAI,EAAE,GADP;AAECC,EAAAA,IAAI,EAAE,UAFP;AAGCC,EAAAA,SAAS,EAAET,QAHZ;AAICU,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJP,CADc,EAOd;AACCJ,EAAAA,IAAI,EAAE,QADP;AAECC,EAAAA,IAAI,EAAE,OAFP;AAGC;AACA;AACA;AACAC,EAAAA,SAAS,EAAE;AAAA,WACV;AAAO;AAAgC,4BAAvC,CADU;AAAA;AANZ,CAPc,EAgBd;AACCF,EAAAA,IAAI,EAAE,OADP;AAECC,EAAAA,IAAI,EAAE,WAFP;AAGCC,EAAAA,SAAS,EAAER;AAHZ,CAhBc,EAqBd;AACCM,EAAAA,IAAI,EAAE,QADP;AAECC,EAAAA,IAAI,EAAE,WAFP;AAGCC,EAAAA,SAAS,EAAEP;AAHZ,CArBc,EA0Bd;AACCK,EAAAA,IAAI,EAAE,SADP;AAECC,EAAAA,IAAI,EAAE,QAFP;AAGCC,EAAAA,SAAS,EAAEN;AAHZ,CA1Bc,CAAf;AAiCA,IAAMS,MAAM,GAAG,IAAIb,SAAJ,CAAc;AAC5Bc,EAAAA,IAAI,EAAE,SADsB;AAE5BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFU;AAG5BX,EAAAA,MAAM,EAANA;AAH4B,CAAd,CAAf;AAMAM,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACrC,MAAMV,YAAY,GAAGQ,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAACC,MAAD;AAAA,WAAYA,MAAM,CAACd,IAAP,CAAYC,YAAxB;AAAA,GAAhB,CAArB;;AACA,MAAIA,YAAJ,EAAkB;AACjB,QAAMc,IAAI,GAAGC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAb;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAZ;;AACA,QAAI,CAACA,IAAL,EAAW;AACVJ,MAAAA,IAAI,CAAC;AACJd,QAAAA,IAAI,EAAE,QADF;AAEJyB,QAAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAEd,EAAE,CAACe;AAAf;AAFH,OAAD,CAAJ;AAIA,KALD,MAKO;AACNb,MAAAA,IAAI;AACJ;;AAEDjB,IAAAA,QAAQ,CAAC+B,IAAT,GAAgBC,kBAAhB,CAAmC,UAACX,IAAD,EAAU;AAC5C,UAAI,CAACA,IAAL,EAAW;AACVJ,QAAAA,IAAI,CAAC;AACJd,UAAAA,IAAI,EAAE,QADF;AAEJyB,UAAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAEd,EAAE,CAACe;AAAf;AAFH,SAAD,CAAJ;AAIA,OALD,MAKO;AACNb,QAAAA,IAAI;AACJ;AACD,KATD;AAUA;AACD,CAzBD;AA2BA,eAAeT,MAAf","sourcesContent":["import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n// import HomeView from \"../views/HomeView.vue\";\nimport UserList from \"../views/UserList.vue\";\nimport ChatBoard from \"../views/ChatBoard.vue\";\nimport LoginView from \"../views/LoginView.vue\";\nimport SignUp from \"../views/SignUp.vue\";\nimport firebase from \"@/firebase/firebase\";\n\nVue.use(VueRouter);\n\nconst routes = [\n {\n  path: \"/\",\n  name: \"UserList\",\n  component: UserList,\n  meta: { requiresAuth: true },\n },\n {\n  path: \"/about\",\n  name: \"about\",\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: () =>\n   import(/* webpackChunkName: \"about\" */ \"../views/AboutView.vue\"),\n },\n {\n  path: \"/chat\",\n  name: \"ChatBoard\",\n  component: ChatBoard,\n },\n {\n  path: \"/login\",\n  name: \"LoginView\",\n  component: LoginView,\n },\n {\n  path: \"/signup\",\n  name: \"SignUp\",\n  component: SignUp,\n },\n];\n\nconst router = new VueRouter({\n mode: \"history\",\n base: process.env.BASE_URL,\n routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n if (requiresAuth) {\n  const user = sessionStorage.getItem(\"user\");\n  console.log(JSON.parse(user));\n  if (!user) {\n   next({\n    path: \"/login\",\n    query: { redirect: to.fullPath },\n   });\n  } else {\n   next();\n  }\n\n  firebase.auth().onAuthStateChanged((user) => {\n   if (!user) {\n    next({\n     path: \"/login\",\n     query: { redirect: to.fullPath },\n    });\n   } else {\n    next();\n   }\n  });\n }\n});\n\nexport default router;\n"]},"metadata":{},"sourceType":"module"}