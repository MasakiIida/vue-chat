{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\"; // import HomeView from \"../views/HomeView.vue\";\n// import UserList from \"../views/UserList.vue\";\n\nimport RoomList from \"../views/RoomList.vue\";\nimport ChatBoard from \"../views/ChatBoard.vue\";\nimport LoginView from \"../views/LoginView.vue\";\nimport SignUp from \"../views/SignUp.vue\";\nimport firebase from \"@/firebase/firebase\";\nVue.use(VueRouter);\nvar routes = [{\n  path: \"/\",\n  name: \"RoomList\",\n  component: RoomList,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/about\",\n  name: \"about\",\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: function component() {\n    return import(\n    /* webpackChunkName: \"about\" */\n    \"../views/AboutView.vue\");\n  }\n}, {\n  path: \"/chat\",\n  name: \"ChatBoard\",\n  component: ChatBoard\n}, {\n  path: \"/login\",\n  name: \"LoginView\",\n  component: LoginView\n}, {\n  path: \"/signup\",\n  name: \"SignUp\",\n  component: SignUp\n}];\nvar router = new VueRouter({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes: routes\n});\nrouter.beforeEach(function (to, from, next) {\n  var requiresAuth = to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  });\n\n  if (requiresAuth) {\n    // const user = sessionStorage.getItem(\"user\");\n    // console.log(JSON.parse(user));\n    // if (!user) {\n    //  next({\n    //   path: \"/login\",\n    //   query: { redirect: to.fullPath },\n    //  });\n    // } else {\n    //  next();\n    // }\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (!user) {\n        next({\n          path: \"/login\",\n          query: {\n            redirect: to.fullPath\n          }\n        });\n      } else {\n        next();\n      }\n    });\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"sources":["/Users/masakiiida/Documents/Project/Portfolio/vue-chat/src/router/index.js"],"names":["Vue","VueRouter","RoomList","ChatBoard","LoginView","SignUp","firebase","use","routes","path","name","component","meta","requiresAuth","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","matched","some","record","auth","onAuthStateChanged","user","query","redirect","fullPath"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CACA;AACA;;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AAEAN,GAAG,CAACO,GAAJ,CAAQN,SAAR;AAEA,IAAMO,MAAM,GAAG,CACd;AACCC,EAAAA,IAAI,EAAE,GADP;AAECC,EAAAA,IAAI,EAAE,UAFP;AAGCC,EAAAA,SAAS,EAAET,QAHZ;AAICU,EAAAA,IAAI,EAAE;AAAEC,IAAAA,YAAY,EAAE;AAAhB;AAJP,CADc,EAOd;AACCJ,EAAAA,IAAI,EAAE,QADP;AAECC,EAAAA,IAAI,EAAE,OAFP;AAGC;AACA;AACA;AACAC,EAAAA,SAAS,EAAE;AAAA,WACV;AAAO;AAAgC,4BAAvC,CADU;AAAA;AANZ,CAPc,EAgBd;AACCF,EAAAA,IAAI,EAAE,OADP;AAECC,EAAAA,IAAI,EAAE,WAFP;AAGCC,EAAAA,SAAS,EAAER;AAHZ,CAhBc,EAqBd;AACCM,EAAAA,IAAI,EAAE,QADP;AAECC,EAAAA,IAAI,EAAE,WAFP;AAGCC,EAAAA,SAAS,EAAEP;AAHZ,CArBc,EA0Bd;AACCK,EAAAA,IAAI,EAAE,SADP;AAECC,EAAAA,IAAI,EAAE,QAFP;AAGCC,EAAAA,SAAS,EAAEN;AAHZ,CA1Bc,CAAf;AAiCA,IAAMS,MAAM,GAAG,IAAIb,SAAJ,CAAc;AAC5Bc,EAAAA,IAAI,EAAE,SADsB;AAE5BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFU;AAG5BX,EAAAA,MAAM,EAANA;AAH4B,CAAd,CAAf;AAMAM,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACrC,MAAMV,YAAY,GAAGQ,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAACC,MAAD;AAAA,WAAYA,MAAM,CAACd,IAAP,CAAYC,YAAxB;AAAA,GAAhB,CAArB;;AACA,MAAIA,YAAJ,EAAkB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAP,IAAAA,QAAQ,CAACqB,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,IAAD,EAAU;AAC5C,UAAI,CAACA,IAAL,EAAW;AACVN,QAAAA,IAAI,CAAC;AACJd,UAAAA,IAAI,EAAE,QADF;AAEJqB,UAAAA,KAAK,EAAE;AAAEC,YAAAA,QAAQ,EAAEV,EAAE,CAACW;AAAf;AAFH,SAAD,CAAJ;AAIA,OALD,MAKO;AACNT,QAAAA,IAAI;AACJ;AACD,KATD;AAUA,GAtBD,MAsBO;AACNA,IAAAA,IAAI;AACJ;AACD,CA3BD;AA6BA,eAAeT,MAAf","sourcesContent":["import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n// import HomeView from \"../views/HomeView.vue\";\n// import UserList from \"../views/UserList.vue\";\nimport RoomList from \"../views/RoomList.vue\";\nimport ChatBoard from \"../views/ChatBoard.vue\";\nimport LoginView from \"../views/LoginView.vue\";\nimport SignUp from \"../views/SignUp.vue\";\nimport firebase from \"@/firebase/firebase\";\n\nVue.use(VueRouter);\n\nconst routes = [\n {\n  path: \"/\",\n  name: \"RoomList\",\n  component: RoomList,\n  meta: { requiresAuth: true },\n },\n {\n  path: \"/about\",\n  name: \"about\",\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: () =>\n   import(/* webpackChunkName: \"about\" */ \"../views/AboutView.vue\"),\n },\n {\n  path: \"/chat\",\n  name: \"ChatBoard\",\n  component: ChatBoard,\n },\n {\n  path: \"/login\",\n  name: \"LoginView\",\n  component: LoginView,\n },\n {\n  path: \"/signup\",\n  name: \"SignUp\",\n  component: SignUp,\n },\n];\n\nconst router = new VueRouter({\n mode: \"history\",\n base: process.env.BASE_URL,\n routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n const requiresAuth = to.matched.some((record) => record.meta.requiresAuth);\n if (requiresAuth) {\n  // const user = sessionStorage.getItem(\"user\");\n  // console.log(JSON.parse(user));\n  // if (!user) {\n  //  next({\n  //   path: \"/login\",\n  //   query: { redirect: to.fullPath },\n  //  });\n  // } else {\n  //  next();\n  // }\n\n  firebase.auth().onAuthStateChanged((user) => {\n   if (!user) {\n    next({\n     path: \"/login\",\n     query: { redirect: to.fullPath },\n    });\n   } else {\n    next();\n   }\n  });\n } else {\n  next();\n }\n});\n\nexport default router;\n"]},"metadata":{},"sourceType":"module"}